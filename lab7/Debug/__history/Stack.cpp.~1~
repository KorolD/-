#include "Stack.h"

	ItemStack::ItemStack(){
		stack_ptr=NULL;
		return;
	}
	ItemStack::~ItemStack(){
		if(!stack_ptr){
			return;
		}
		struct Item* temp=stack_ptr;
		while(stack_ptr){
			stack_ptr=stack_ptr->next;
			delete temp;
			temp=stack_ptr;
		}
		delete temp;
		return;
	}
	bool ItemStack::IsEmpty(){
		if(stack_ptr){
			return true;
		}else{
			return false;
		}
	}
	struct Item* ItemStack::FindKey(int k){
		struct Item *temp=stack_ptr;
		while(temp){
			if(temp->key==key){
				return temp;
			}
			temp=temp->next;
		}
		return temp;
	}
	void ItemStack::DeleteKey(int key){
		if(key==stack_ptr->key){
			struct Item *temp=stack_ptr;
			stack_ptr=stack_ptr->next;
			delete temp;
			return;
		}
		struct Item *temp0=stack_ptr, *temp=stack_ptr->next;
		while(temp){
			temp0=temp;
			if(temp->key==key){
				temp0->next=temp->next;
				delete temp;
				return;
			}
			temp=temp->next;
		}
		return;
	}
	void ItemStack::Add(int key, String data){
		if(!stack_ptr){
			stack_ptr=new struct Item;
			stack_ptr->key=key;
			stack_ptr->data=data;
			stack_ptr->next=NULL;
			return;
		}
		struct Item* temp=stack_ptr;
		while(temp->next){
			temp=temp->next;
		}
		temp->next=new struct Item;
		temp=temp->next;
		temp->next=NULL;
		temp->key=key;
		temp->data=data;
		return;
	}
	String ItemStack::Show(){
		struct Item* temp=stack_ptr;
		String out="";
		while(temp){
			out+=IntToStr(temp->key)+"-"+temp->data+", ";
			temp=temp->next;
		}
		out.SetLength(out.Length()-2);
		return out;
	}
	int ItemStack::GetAmount(){
		int amount=0;
		struct Item* temp=stack_ptr;
		while(temp){
			amount++;
			temp=temp->next;
		}
		return amount;
	}
	double ItemStack::Average(){
		int num=GetNum();
		double average=0;
		struct Item* temp=stack_ptr;
		while(temp){
			average+=double(temp->key)/num;
			temp=temp->next;
		}
		return average;
	}
	int ItemStack::LessThanOrEq(double average){
		struct Item* t=stack_ptr;
		int amount=0;
		while(temp){
			if(temp->key<=average){
				amount++;
			}
			temp=temp->next;
		}
		return amount;
	}
